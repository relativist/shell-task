#!/bin/bash

# GLOBAL
tasks="/home/METROSOFT/a.sitnikov/project/task/tasks"
task_tmp="/home/METROSOFT/a.sitnikov/project/task/tasks_tmp"
version="v0.01"

#FUNCTIONS
usage()
{
		echo "Usage: task -a Some task to append"
		echo "Usage: task -d 3 (Delete some task)"
		echo "Usage: task (is to show)"
		echo "Available keys: -a -d -v"
}

show()
{
	cat $tasks | grep -n .. 
}

#CODE

if [[ $1 = "-a" || $1 = "-d" || $1 = "-v"  ]]; then
	if [[ $1 = "-a" ]]; then
		shift
		echo "$@" >> $tasks		
		show
		echo "OK"
	fi	
	if [[ $1 = "-v" ]]; then		
		echo $version
	fi	
	if [[ $1 = "-d" ]]; then
		if [[ $2 ]]; then
			echo "$2"
			cat $tasks | grep -n .. | grep -v "$2:" | awk -F: '{print $2}' > $task_tmp
			cat $task_tmp > $tasks
			rm $task_tmp
			show
		else
			echo "NOT ENOUGH ARGUMENTS :"
			usage
		fi		
	fi	
else
	if [[ $1 ]];then
		usage
	else
		show
	fi
fi

